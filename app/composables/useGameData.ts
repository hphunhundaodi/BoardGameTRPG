// æ¸¸æˆè¯¦ç»†æ•°æ®ç»“æ„
export const gameDetailsData = {
  æ¡Œæ¸¸: {
    æ¯›çº¿: [
      {
        name: "é˜¿ç“¦éš†",
        description: "ä¸€æ¬¾ç¤¾äº¤æ¨ç†æ¸¸æˆï¼Œç©å®¶åˆ†ä¸ºå¥½äººå’Œåäººä¸¤ä¸ªé˜µè¥ï¼Œé€šè¿‡æŠ•ç¥¨å’Œä»»åŠ¡æ¥å†³å®šèƒœè´Ÿã€‚éœ€è¦è‰¯å¥½çš„è§‚å¯ŸåŠ›å’Œæ¨ç†èƒ½åŠ›ã€‚",
        players: "5-10äºº",
        duration: "30-45åˆ†é’Ÿ",
        difficulty: 2,
        tags: ["æ¨ç†", "ç¤¾äº¤", "è§’è‰²æ‰®æ¼”"]
      },
      {
        name: "ç‹¼äººæ€",
        description: "ç»å…¸çš„å¤šäººç¤¾äº¤æ¨ç†æ¸¸æˆï¼Œæ‘æ°‘éœ€è¦æ‰¾å‡ºéšè—çš„ç‹¼äººï¼Œè€Œç‹¼äººè¦æ¶ˆç­æ‰€æœ‰æ‘æ°‘ã€‚è€ƒéªŒç©å®¶çš„é€»è¾‘æ¨ç†å’Œè¡¨æ¼”èƒ½åŠ›ã€‚",
        players: "6-18äºº",
        duration: "20-40åˆ†é’Ÿ",
        difficulty: 2,
        tags: ["æ¨ç†", "ç¤¾äº¤", "ç»å…¸"]
      },
      {
        name: "å‰§æœ¬æ€ï¼šå¤å®…æƒŠé­‚",
        description: "æ²‰æµ¸å¼è§’è‰²æ‰®æ¼”æ¨ç†æ¸¸æˆï¼Œç©å®¶éœ€è¦åœ¨å¤è€å®…é‚¸ä¸­å¯»æ‰¾çº¿ç´¢ï¼Œæ­å¼€ç¥ç§˜æ¡ˆä»¶çš„çœŸç›¸ã€‚",
        players: "6-8äºº",
        duration: "3-4å°æ—¶",
        difficulty: 3,
        tags: ["æ¨ç†", "æ²‰æµ¸å¼", "æ‚¬ç–‘"]
      },
      {
        name: "è°æ˜¯å§åº•",
        description: "ç®€å•æœ‰è¶£çš„ç¤¾äº¤æ¸¸æˆï¼Œå¤§éƒ¨åˆ†ç©å®¶æ‹¿åˆ°ç›¸åŒè¯æ±‡ï¼Œå°‘æ•°å§åº•æ‹¿åˆ°ç›¸ä¼¼è¯æ±‡ï¼Œé€šè¿‡æè¿°æ‰¾å‡ºå§åº•ã€‚",
        players: "4-10äºº",
        duration: "15-30åˆ†é’Ÿ",
        difficulty: 1,
        tags: ["ç¤¾äº¤", "è¯æ±‡", "è½»æ¾"]
      },
      {
        name: "å‰§æœ¬æ€ï¼šæ°‘å›½å¾€äº‹",
        description: "ä»¥æ°‘å›½æ—¶æœŸä¸ºèƒŒæ™¯çš„æ¨ç†å‰§æœ¬ï¼Œç©å®¶æ‰®æ¼”ä¸åŒèº«ä»½çš„è§’è‰²ï¼Œåœ¨é”™ç»¼å¤æ‚çš„å…³ç³»ä¸­å¯»æ‰¾çœŸç›¸ã€‚",
        players: "6-7äºº",
        duration: "4-5å°æ—¶",
        difficulty: 4,
        tags: ["æ¨ç†", "å†å²", "æƒ…æ„Ÿ"]
      }
    ],
    è½»ç­–: [
      {
        name: "å¡å¦å²›",
        description: "ç»å…¸çš„èµ„æºç®¡ç†å’Œå»ºè®¾æ¸¸æˆï¼Œç©å®¶é€šè¿‡æ”¶é›†èµ„æºã€å»ºé€ é“è·¯å’ŒåŸé•‡æ¥è·å¾—èƒœåˆ©ç‚¹æ•°ã€‚",
        players: "3-4äºº",
        duration: "60-90åˆ†é’Ÿ",
        difficulty: 2,
        tags: ["èµ„æºç®¡ç†", "å»ºè®¾", "ç»å…¸"]
      },
      {
        name: "è½¦ç¥¨ä¹‹æ—…",
        description: "é“è·¯ä¸»é¢˜çš„ç­–ç•¥æ¸¸æˆï¼Œç©å®¶æ”¶é›†è½¦ç¥¨å¡ç‰Œæ¥è¿æ¥ä¸åŒåŸå¸‚çš„é“è·¯çº¿ï¼Œå®Œæˆç›®çš„åœ°è·¯çº¿ã€‚",
        players: "2-5äºº",
        duration: "30-60åˆ†é’Ÿ",
        difficulty: 2,
        tags: ["é“è·¯", "æ”¶é›†", "è·¯çº¿è§„åˆ’"]
      },
      {
        name: "æ‹¼å¸ƒè‰ºæœ¯",
        description: "åŒäººæŠ½è±¡ç­–ç•¥æ¸¸æˆï¼Œç©å®¶è´­ä¹°æ‹¼å¸ƒå—æ¥å¡«å……è‡ªå·±çš„è¢«å­ï¼Œè·å¾—æœ€é«˜åˆ†æ•°ã€‚",
        players: "2äºº",
        duration: "15-30åˆ†é’Ÿ",
        difficulty: 2,
        tags: ["æ‹¼å›¾", "åŒäºº", "æŠ½è±¡"]
      },
      {
        name: "ä¸ƒå¤§å¥‡è¿¹",
        description: "æ–‡æ˜å»ºè®¾æ¸¸æˆï¼Œç©å®¶å‘å±•å¤ä»£æ–‡æ˜ï¼Œå»ºé€ ä¸–ç•Œå¥‡è¿¹ï¼Œé€šè¿‡å¤šç§é€”å¾„è·å¾—èƒœåˆ©ç‚¹æ•°ã€‚",
        players: "2-7äºº",
        duration: "30-60åˆ†é’Ÿ",
        difficulty: 3,
        tags: ["æ–‡æ˜", "å»ºè®¾", "å¤šå…ƒåŒ–"]
      },
      {
        name: "ç’€ç’¨å®çŸ³",
        description: "å®çŸ³å•†äººä¸»é¢˜æ¸¸æˆï¼Œç©å®¶æ”¶é›†å®çŸ³æ¥è´­ä¹°å‘å±•å¡ï¼Œå»ºç«‹å®çŸ³å¸å›½ã€‚",
        players: "2-4äºº",
        duration: "30-45åˆ†é’Ÿ",
        difficulty: 2,
        tags: ["å¼•æ“æ„å»º", "å®çŸ³", "ç»æµ"]
      }
    ],
    ä¸­ç­–: [
      {
        name: "å†œåœºä¸»",
        description: "å®¶åº­å†œåœºç»è¥æ¸¸æˆï¼Œç©å®¶ç®¡ç†å†œåœºèµ„æºï¼Œå…»æ®–åŠ¨ç‰©ï¼Œç§æ¤ä½œç‰©ï¼Œå»ºè®¾å†œåœºè®¾æ–½ã€‚",
        players: "1-5äºº",
        duration: "30-45åˆ†é’Ÿ",
        difficulty: 3,
        tags: ["å†œåœº", "èµ„æºç®¡ç†", "å®¶åº­"]
      },
      {
        name: "æ¸¯å£åŸå¸‚",
        description: "æµ·æ´‹è´¸æ˜“ä¸»é¢˜ç­–ç•¥æ¸¸æˆï¼Œç©å®¶å»ºè®¾æ¸¯å£åŸå¸‚ï¼Œå‘å±•è´¸æ˜“è·¯çº¿ï¼Œæ§åˆ¶æµ·æ´‹èµ„æºã€‚",
        players: "2-4äºº",
        duration: "90-120åˆ†é’Ÿ",
        difficulty: 3,
        tags: ["è´¸æ˜“", "æµ·æ´‹", "åŸå¸‚å»ºè®¾"]
      },
      {
        name: "ç¿¼å±•",
        description: "é¸Ÿç±»ä¸»é¢˜çš„å¼•æ“æ„å»ºæ¸¸æˆï¼Œç©å®¶å¸å¼•ä¸åŒé¸Ÿç±»åˆ°æ –æ¯åœ°ï¼Œå»ºç«‹å¼ºå¤§çš„é¸Ÿç±»ç”Ÿæ€ç³»ç»Ÿã€‚",
        players: "1-5äºº",
        duration: "40-70åˆ†é’Ÿ",
        difficulty: 3,
        tags: ["é¸Ÿç±»", "å¼•æ“æ„å»º", "è‡ªç„¶"]
      },
      {
        name: "é©¬å¯æ³¢ç½—æ¸¸è®°",
        description: "ä»¥é©¬å¯æ³¢ç½—çš„æ—…è¡Œä¸ºä¸»é¢˜ï¼Œç©å®¶æ²¿ç€ä¸ç»¸ä¹‹è·¯è¿›è¡Œè´¸æ˜“å’Œæ¢é™©ã€‚",
        players: "2-4äºº",
        duration: "60-100åˆ†é’Ÿ",
        difficulty: 4,
        tags: ["æ¢é™©", "è´¸æ˜“", "å†å²"]
      },
      {
        name: "å¤§è¥¿éƒ¨é“è·¯",
        description: "é“è·¯å»ºè®¾ç­–ç•¥æ¸¸æˆï¼Œç©å®¶åœ¨ç¾å›½è¥¿éƒ¨å»ºè®¾é“è·¯ç½‘ç»œï¼Œè¿è¾“è´§ç‰©å’Œä¹˜å®¢ã€‚",
        players: "2-4äºº",
        duration: "60-90åˆ†é’Ÿ",
        difficulty: 3,
        tags: ["é“è·¯", "è¥¿éƒ¨", "ç½‘ç»œå»ºè®¾"]
      }
    ],
    é‡ç­–: [
      {
        name: "ç›–äºšè®¡åˆ’",
        description: "å¤ªç©ºæ®–æ°‘ä¸»é¢˜çš„é‡åº¦ç­–ç•¥æ¸¸æˆï¼Œç©å®¶æ§åˆ¶å¤–æ˜Ÿç§æ—åœ¨é“¶æ²³ç³»ä¸­æ®–æ°‘å’Œå‘å±•ã€‚",
        players: "1-4äºº",
        duration: "60-150åˆ†é’Ÿ",
        difficulty: 5,
        tags: ["å¤ªç©º", "æ®–æ°‘", "é‡åº¦ç­–ç•¥"]
      },
      {
        name: "æ–‡æ˜å¸å›½",
        description: "å²è¯—çº§æ–‡æ˜å‘å±•æ¸¸æˆï¼Œç©å®¶ä»å¤ä»£å‘å±•åˆ°ç°ä»£ï¼Œç®¡ç†æ–‡æ˜çš„å„ä¸ªæ–¹é¢ã€‚",
        players: "2-4äºº",
        duration: "120-240åˆ†é’Ÿ",
        difficulty: 5,
        tags: ["æ–‡æ˜", "å²è¯—", "å‘å±•"]
      },
      {
        name: "é»„æ˜å¸å›½",
        description: "å¤ªç©ºæ­Œå‰§é£æ ¼çš„ç­–ç•¥æ¸¸æˆï¼Œç©å®¶æ§åˆ¶æ˜Ÿé™…å¸å›½äº‰å¤ºé“¶æ²³ç³»çš„éœ¸æƒã€‚",
        players: "3-6äºº",
        duration: "240-480åˆ†é’Ÿ",
        difficulty: 5,
        tags: ["å¤ªç©ºæ­Œå‰§", "å¸å›½", "å²è¯—æˆ˜äº‰"]
      },
      {
        name: "é€šè¿‡æ—¶ä»£",
        description: "æ–‡æ˜å‘å±•æ¸¸æˆï¼Œç©å®¶å¼•å¯¼æ–‡æ˜ä»å¤ä»£å‘å±•åˆ°ç°ä»£ï¼Œåšå‡ºé‡è¦çš„å†å²å†³ç­–ã€‚",
        players: "2-4äºº",
        duration: "60-120åˆ†é’Ÿ",
        difficulty: 4,
        tags: ["æ–‡æ˜", "å†å²", "å‘å±•"]
      },
      {
        name: "ç«æ˜Ÿè®¡åˆ’",
        description: "ç«æ˜Ÿæ®–æ°‘ä¸»é¢˜æ¸¸æˆï¼Œç©å®¶ä½œä¸ºå…¬å¸åœ¨ç«æ˜Ÿä¸Šå»ºè®¾åŸºç¡€è®¾æ–½ï¼Œæ”¹é€ ç¯å¢ƒã€‚",
        players: "1-5äºº",
        duration: "90-120åˆ†é’Ÿ",
        difficulty: 4,
        tags: ["ç«æ˜Ÿ", "æ®–æ°‘", "ç¯å¢ƒæ”¹é€ "]
      }
    ]
  },
  è·‘å›¢: {
    COC: [
      {
        name: "ç‡ƒçƒ§çš„æ˜Ÿè¾°",
        description: "ç»å…¸çš„å…‹è‹é²ç¥è¯æ¨¡ç»„ï¼Œè°ƒæŸ¥å‘˜ä»¬éœ€è¦æ·±å…¥ä¸€ä¸ªåè¿œå°é•‡ï¼Œæ­å¼€å¤è€é‚ªæ•™çš„ç§˜å¯†ã€‚å……æ»¡æ‚¬ç–‘å’Œææ€–å…ƒç´ ã€‚",
        players: "3-6äºº",
        duration: "4-6å°æ—¶",
        difficulty: 3,
        tags: ["ææ€–", "è°ƒæŸ¥", "é‚ªæ•™"]
      },
      {
        name: "ä¸æ¯çš„æ¸´æœ›",
        description: "å¿ƒç†ææ€–ä¸»é¢˜æ¨¡ç»„ï¼Œè°ƒæŸ¥å‘˜é¢ä¸´å†…å¿ƒæ·±å¤„çš„ææƒ§ï¼Œåœ¨ç°å®ä¸å¹»å¢ƒä¹‹é—´å¯»æ‰¾çœŸç›¸ã€‚",
        players: "3-5äºº",
        duration: "3-5å°æ—¶",
        difficulty: 4,
        tags: ["å¿ƒç†ææ€–", "å¹»å¢ƒ", "å†…å¿ƒ"]
      },
      {
        name: "å†°å†·çš„æ”¶è·",
        description: "åŒ—ææ¢é™©ä¸»é¢˜ï¼Œè°ƒæŸ¥å‘˜åœ¨ä¸¥é…·çš„ç¯å¢ƒä¸­è¿½è¸ªç¥ç§˜å¤±è¸ªæ¡ˆä»¶ï¼Œé¢å¯¹æœªçŸ¥çš„å¤è€å­˜åœ¨ã€‚",
        players: "4-6äºº",
        duration: "5-7å°æ—¶",
        difficulty: 4,
        tags: ["åŒ—æ", "æ¢é™©", "å¤±è¸ª"]
      },
      {
        name: "çˆ±ä¸½ä¸çš„èŒ¶è¯ä¼š",
        description: "ç«¥è¯é£æ ¼çš„è¯¡å¼‚æ¨¡ç»„ï¼Œè°ƒæŸ¥å‘˜è¿›å…¥æ‰­æ›²çš„ä»™å¢ƒä¸–ç•Œï¼Œä½“éªŒç–¯ç‹‚çš„èŒ¶è¯ä¼šã€‚",
        players: "3-5äºº",
        duration: "3-4å°æ—¶",
        difficulty: 3,
        tags: ["ç«¥è¯", "ä»™å¢ƒ", "ç–¯ç‹‚"]
      },
      {
        name: "ç‹‚æ°”å±±è„‰",
        description: "æ´›å¤«å…‹æ‹‰å¤«ç‰¹åŸè‘—æ”¹ç¼–ï¼Œè°ƒæŸ¥å‘˜æ¢ç´¢å—ææ´²çš„å¤è€é—è¿¹ï¼Œé¢å¯¹è¶…è¶Šäººç±»ç†è§£çš„ææ€–ã€‚",
        players: "4-6äºº",
        duration: "6-8å°æ—¶",
        difficulty: 5,
        tags: ["å—æ", "å¤è€", "è¶…è¶Šç†è§£"]
      }
    ],
    DND: [
      {
        name: "é›ªå¤œæ€ªè°ˆ",
        description: "å¯’å†¬èƒŒæ™¯çš„å†’é™©æ¨¡ç»„ï¼Œå†’é™©è€…åœ¨æš´é£é›ªä¸­å¯»æ‰¾å¤±è¸ªçš„æ‘æ°‘ï¼Œæ­å¼€é›ªå±±æ·±å¤„çš„ç§˜å¯†ã€‚",
        players: "3-6äºº",
        duration: "4-6å°æ—¶",
        difficulty: 3,
        tags: ["å¯’å†¬", "æ•‘æ´", "é›ªå±±"]
      },
      {
        name: "æš—æ— å¤©æ—¥",
        description: "åœ°ä¸‹åŸæ¢é™©ç»å…¸æ¨¡ç»„ï¼Œå†’é™©è€…æ·±å…¥é»‘æš—çš„åœ°ä¸‹è¿·å®«ï¼Œé¢å¯¹å„ç§æ€ªç‰©å’Œé™·é˜±çš„æŒ‘æˆ˜ã€‚",
        players: "4-6äºº",
        duration: "5-8å°æ—¶",
        difficulty: 4,
        tags: ["åœ°ä¸‹åŸ", "è¿·å®«", "æ€ªç‰©"]
      },
      {
        name: "æ—ä¸­é­…å½±",
        description: "æ£®æ—ä¸»é¢˜å†’é™©ï¼Œå†’é™©è€…è°ƒæŸ¥ç¥ç§˜çš„æ£®æ—å¼‚è±¡ï¼Œä¸ç²¾çµã€å¾·é²ä¼Šå’Œå¤è€é­”æ³•æ‰“äº¤é“ã€‚",
        players: "3-5äºº",
        duration: "3-5å°æ—¶",
        difficulty: 3,
        tags: ["æ£®æ—", "ç²¾çµ", "é­”æ³•"]
      }
    ]
  }
}

// åˆ†ç±»é…ç½®
export const categoryConfig = {
  æ¡Œæ¸¸: {
    icon: "ğŸ²",
    color: "from-emerald-900/20 to-teal-900/20 border-emerald-500/30",
    description: "ç»å…¸æ¡Œé¢æ¸¸æˆä½“éªŒ",
    bgGradient: "from-emerald-900 via-teal-900/50 to-slate-900"
  },
  è·‘å›¢: {
    icon: "ğŸ­",
    color: "from-purple-900/20 to-indigo-900/20 border-purple-500/30",
    description: "è§’è‰²æ‰®æ¼”å†’é™©ä¹‹æ—…",
    bgGradient: "from-purple-900 via-indigo-900/50 to-slate-900"
  },
  æ¯›çº¿: {
    icon: "ğŸ§¶",
    color: "from-pink-900/20 to-rose-900/20 border-pink-500/30",
    description: "è½»æ¾ç¤¾äº¤æ¸¸æˆ",
    bgGradient: "from-pink-900 via-rose-900/50 to-slate-900"
  },
  è½»ç­–: {
    icon: "âš¡",
    color: "from-yellow-900/20 to-orange-900/20 border-yellow-500/30",
    description: "ç­–ç•¥å…¥é—¨çº§æ¸¸æˆ",
    bgGradient: "from-yellow-900 via-orange-900/50 to-slate-900"
  },
  ä¸­ç­–: {
    icon: "ğŸ§ ",
    color: "from-blue-900/20 to-cyan-900/20 border-blue-500/30",
    description: "ä¸­ç­‰å¤æ‚åº¦ç­–ç•¥",
    bgGradient: "from-blue-900 via-cyan-900/50 to-slate-900"
  },
  é‡ç­–: {
    icon: "âš”ï¸",
    color: "from-red-900/20 to-orange-900/20 border-red-500/30",
    description: "é«˜çº§ç­–ç•¥æŒ‘æˆ˜",
    bgGradient: "from-red-900 via-orange-900/50 to-slate-900"
  },
  COC: {
    icon: "ğŸŒŸ",
    color: "from-red-900/20 to-purple-900/20 border-red-500/30",
    description: "å…‹è‹é²çš„å‘¼å”¤",
    bgGradient: "from-red-900 via-purple-900/50 to-slate-900"
  },
  DND: {
    icon: "ğŸ‰",
    color: "from-blue-900/20 to-green-900/20 border-blue-500/30",
    description: "é¾™ä¸åœ°ä¸‹åŸ",
    bgGradient: "from-blue-900 via-green-900/50 to-slate-900"
  }
}

// æ¸¸æˆå¯¼èˆªé€»è¾‘
export const useGameNavigation = () => {
  const navigationPath = ref<string[]>([])
  const selectedGame = ref<string | null>(null)

  // è·å–å½“å‰å±‚çº§çš„æ•°æ®
  const getCurrentLevelData = () => {
    if (navigationPath.value.length === 0) {
      return Object.keys(gameDetailsData)
    } else if (navigationPath.value.length === 1) {
      const mainCategory = navigationPath.value[0] as keyof typeof gameDetailsData
      return Object.keys(gameDetailsData[mainCategory])
    } else if (navigationPath.value.length === 2) {
      const mainCategory = navigationPath.value[0] as keyof typeof gameDetailsData
      const subCategory = navigationPath.value[1] as keyof (typeof gameDetailsData)[typeof mainCategory]

      // ä½¿ç”¨å¯é€‰é“¾å’Œç©ºå€¼åˆå¹¶
      return gameDetailsData[mainCategory]?.[subCategory] ?? []
    }
    return []
  }

  // å¤„ç†å¯¼èˆªç‚¹å‡»
  const handleNavigation = (item: string) => {
    if (navigationPath.value.length < 2) {
      navigationPath.value = [...navigationPath.value, item]
    }
  }

  // å¤„ç†é¢åŒ…å±‘å¯¼èˆª
  const handleBreadcrumbNavigation = (index: number) => {
    if (index === -1) {
      navigationPath.value = []
    } else {
      navigationPath.value = navigationPath.value.slice(0, index + 1)
    }
    selectedGame.value = null
  }

  // å¤„ç†æ¸¸æˆé€‰æ‹©
  const handleGameSelect = (game: string) => {
    const fullPath = [...navigationPath.value, game].join(' > ')
    selectedGame.value = fullPath
  }

  // è·å–é¡µé¢æ ‡é¢˜å’Œæè¿°
  type CategoryKey = keyof typeof categoryConfig

  const isCategoryKey = (v: unknown): v is CategoryKey =>
    typeof v === 'string' && v in categoryConfig
  
  const getPageInfo = () => {
    if (navigationPath.value.length === 0) {
      return { title: "æ¸¸æˆä¸–ç•Œ", description: "é€‰æ‹©ä½ æƒ³è¦ä½“éªŒçš„æ¸¸æˆç±»å‹" }
    }
  
    if (navigationPath.value.length === 1) {
      const category = navigationPath.value[0]
      const title = category ?? 'æ¸¸æˆåˆ†ç±»'
      const description = isCategoryKey(category)
        ? categoryConfig[category].description
        : 'é€‰æ‹©æ¸¸æˆåˆ†ç±»'
      return { title, description }
    }
  
    const subCategory = navigationPath.value[1]
    const title = subCategory ?? 'æ¸¸æˆé€‰æ‹©'
    const description = isCategoryKey(subCategory)
      ? categoryConfig[subCategory].description
      : 'é€‰æ‹©æ¸¸æˆå¼€å§‹ä½“éªŒ'
    return { title, description }
  }
  
  

  return {
    navigationPath,
    selectedGame,
    getCurrentLevelData,
    handleNavigation,
    handleBreadcrumbNavigation,
    handleGameSelect,
    getPageInfo
  }
}

